{
  "timestamp": "20250829_175607",
  "dockerfile_path": "envgym/envgym.dockerfile",
  "image_name": "envgym_test_1756490132",
  "build": {
    "success": false,
    "stdout": "",
    "stderr": "#0 building with \"default\" instance using docker driver\n\n#1 [internal] load build definition from envgym.dockerfile\n#1 transferring dockerfile: 2.14kB done\n#1 DONE 0.0s\n\n#2 [internal] load metadata for docker.io/library/ubuntu:22.04\n#2 DONE 0.1s\n\n#3 [internal] load .dockerignore\n#3 transferring context: 2B done\n#3 DONE 0.0s\n\n#4 [ 1/21] FROM docker.io/library/ubuntu:22.04@sha256:1aa979d85661c488ce030ac292876cf6ed04535d3a237e49f61542d8e5de5ae0\n#4 DONE 0.0s\n\n#5 [ 4/21] RUN curl -fsSL https://deno.land/install.sh | sh\n#5 CACHED\n\n#6 [ 5/21] WORKDIR /darkreader\n#6 CACHED\n\n#7 [ 6/21] RUN git clone https://github.com/darkreader/darkreader.git .\n#7 CACHED\n\n#8 [ 2/21] RUN apt-get update &&     apt-get install -y --no-install-recommends     git     curl     ca-certificates     gnupg     lsb-release     software-properties-common     openjdk-17-jre     chromium-browser     firefox     jq     unzip     xdg-utils &&     rm -rf /var/lib/apt/lists/*\n#8 CACHED\n\n#9 [ 3/21] RUN curl -fsSL https://deb.nodesource.com/setup_20.x | bash - &&     apt-get install -y nodejs\n#9 CACHED\n\n#10 [ 8/21] RUN mkdir -p tests && echo '{\"type\":\"module\"}' > tests/package.json && jq . tests/package.json\n#10 CACHED\n\n#11 [ 7/21] RUN mkdir -p tasks && echo '{\"type\":\"module\"}' > tasks/package.json && jq . tasks/package.json\n#11 CACHED\n\n#12 [ 9/21] RUN echo '\"lts/*\"' > .nvmrc\n#12 CACHED\n\n#13 [10/21] RUN touch .env\n#13 CACHED\n\n#14 [11/21] RUN mkdir -p test/website && cat > test/website/index.html <<'EOF'\n#14 DONE 0.3s\n\n#15 [12/21] RUN npm install --jobs=96 --ignore-scripts && [ -d \"node_modules\" ] && echo \"Success\"\n#15 8.358 \n#15 8.358 added 793 packages, and audited 794 packages in 8s\n#15 8.358 \n#15 8.358 177 packages are looking for funding\n#15 8.358   run `npm fund` for details\n#15 8.363 \n#15 8.363 3 low severity vulnerabilities\n#15 8.363 \n#15 8.363 To address all issues, run:\n#15 8.363   npm audit fix\n#15 8.363 \n#15 8.363 Run `npm audit` for details.\n#15 8.364 npm notice\n#15 8.364 npm notice New major version of npm available! 10.8.2 -> 11.5.2\n#15 8.364 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2\n#15 8.364 npm notice To update run: npm install -g npm@11.5.2\n#15 8.364 npm notice\n#15 8.384 Success\n#15 DONE 9.3s\n\n#16 [13/21] RUN npm run test:unit\n#16 0.311 \n#16 0.311 > darkreader@4.9.111 test:unit\n#16 0.311 > jest --config=tests/unit/jest.config.mjs\n#16 0.311 \n#16 4.004 PASS tests/unit/utils/url.tests.ts\n#16 4.005 PASS tests/unit/utils/uid.tests.ts\n#16 4.060 PASS tests/unit/utils/math.tests.ts\n#16 4.214 PASS tests/unit/utils/time.tests.ts\n#16 4.270 PASS tests/unit/config/locales.tests.ts\n#16 4.333 PASS tests/unit/utils/promise-barrier.tests.ts\n#16 4.425 PASS tests/unit/csp/csp.tests.ts\n#16 4.503 PASS tests/unit/utils/parsing.tests.ts\n#16 4.548 PASS tests/unit/utils/state-manager.tests.ts\n#16 4.651 PASS tests/unit/generators/utils/parse.tests.ts\n#16 4.672 PASS tests/unit/inject/fixes.tests.ts\n#16 4.683 PASS tests/unit/utils/text.tests.ts\n#16 4.704 PASS tests/unit/utils/validation.tests.ts\n#16 4.734 PASS tests/unit/config/config.tests.ts\n#16 4.968 PASS tests/unit/utils/color.tests.ts\n#16 5.059 \n#16 5.060 Test Suites: 15 passed, 15 total\n#16 5.060 Tests:       63 passed, 63 total\n#16 5.060 Snapshots:   0 total\n#16 5.060 Time:        4.08 s\n#16 5.060 Ran all test suites.\n#16 DONE 5.2s\n\n#17 [14/21] RUN mkdir -p /root/.mozilla/firefox &&     echo -e '[Profile0]\\nName=default\\nIsRelative=1\\nPath=default-release\\n\\n[General]\\nStartWithLastProfile=1\\nVersion=2' > /root/.mozilla/firefox/profiles.ini &&     mkdir -p /root/.mozilla/firefox/default-release &&     echo -e 'user_pref(\"extensions.webextensions.restrictedDomains\", \"\");\\nuser_pref(\"privacy.resistFingerprinting.block_mozAddonManager\", true);' >> /root/.mozilla/firefox/default-release/prefs.js\n#17 DONE 0.4s\n\n#18 [15/21] RUN TEST_WORKERS=96 npm run test:browser\n#18 0.535 \n#18 0.535 > darkreader@4.9.111 test:browser\n#18 0.535 > npm run test:chrome && npm run test:chrome-mv3 && npm run test:firefox\n#18 0.535 \n#18 0.642 \n#18 0.642 > darkreader@4.9.111 test:chrome\n#18 0.642 > node tasks/cli.js build --debug --test --chrome-mv2 && jest --config=tests/browser/jest.config.mjs --runInBand\n#18 0.642 \n#18 1.393 \u001b[90m17:55:49\u001b[0m \u001b[32mBUILD\u001b[0m\n#18 1.394 \u001b[90m17:55:49\u001b[0m clean (1ms)\n#18 1.399 \u001b[90m17:55:49\u001b[0m bundle-html (4ms)\n#18 18.75 \u001b[90m17:56:06\u001b[0m bundle-js (17351ms)\n#18 18.91 \u001b[90m17:56:06\u001b[0m bundle-css (162ms)\n#18 19.06 \u001b[90m17:56:06\u001b[0m bundle-locales (145ms)\n#18 19.06 \u001b[90m17:56:06\u001b[0m bundle-manifest (0ms)\n#18 19.12 \u001b[90m17:56:06\u001b[0m copy (65ms)\n#18 19.12 \u001b[90m17:56:06\u001b[0m logging (0ms)\n#18 19.12 \u001b[90m17:56:06\u001b[0m \u001b[32mMISSION PASSED! RESPECT +\u001b[0m\n#18 19.87 Error: Could not find Chrome\n#18 19.87     at getChromePath (file:///darkreader/tests/browser/paths.js:54:11)\n#18 19.87     at CustomJestEnvironment.launchChrome (file:///darkreader/tests/browser/environment.js:88:30)\n#18 19.87     at CustomJestEnvironment.launchBrowser (file:///darkreader/tests/browser/environment.js:69:23)\n#18 19.87     at async Promise.all (index 1)\n#18 19.87     at CustomJestEnvironment.setup (file:///darkreader/tests/browser/environment.js:36:26)\n#18 19.87     at runTestInternal (/darkreader/node_modules/jest-runner/build/index.js:266:5)\n#18 19.87     at runTest (/darkreader/node_modules/jest-runner/build/index.js:340:7)\n#18 19.90 FAIL tests/browser/dynamic/style-override.tests.ts\n#18 19.90   ● Test suite failed to run\n#18 19.90 \n#18 19.90     An `executablePath` or `channel` must be specified for `puppeteer-core`\n#18 19.90 \n#18 19.90       92 |         // Explanation of these options:\n#18 19.90       93 |         // https://pptr.dev/guides/chrome-extensions\n#18 19.90     > 94 |         return await launch({\n#18 19.90          |                ^\n#18 19.90       95 |             executablePath,\n#18 19.90       96 |             headless: false,\n#18 19.90       97 |             args: [\n#18 19.90 \n#18 19.90       at assert (file:/darkreader/node_modules/puppeteer-core/src/util/assert.ts:19:11)\n#18 19.90       at ChromeLauncher.computeLaunchArguments (file:/darkreader/node_modules/puppeteer-core/src/node/ChromeLauncher.ts:122:7)\n#18 19.90       at ChromeLauncher.launch (file:/darkreader/node_modules/puppeteer-core/src/node/BrowserLauncher.ts:103:24)\n#18 19.90       at CustomJestEnvironment.launchChrome (file:/darkreader/tests/browser/environment.js:94:16)\n#18 19.90       at CustomJestEnvironment.launchBrowser (file:/darkreader/tests/browser/environment.js:69:23)\n#18 19.90           at async Promise.all (index 1)\n#18 19.90       at CustomJestEnvironment.setup (file:/darkreader/tests/browser/environment.js:36:26)\n#18 19.90 \n#18 19.91 node:events:502\n#18 19.91       throw er; // Unhandled 'error' event\n#18 19.91       ^\n#18 19.91 \n#18 19.91 Error: listen EADDRINUSE: address already in use :::8894\n#18 19.91     at Server.setupListenHandle [as _listen2] (node:net:1908:16)\n#18 19.91     at listenInCluster (node:net:1965:12)\n#18 19.91     at Server.listen (node:net:2067:7)\n#18 19.91     at new WebSocketServer (/darkreader/node_modules/ws/lib/websocket-server.js:102:20)\n#18 19.91     at file:///darkreader/tests/browser/environment.js:337:30\n#18 19.91     at new Promise (<anonymous>)\n#18 19.91     at CustomJestEnvironment.createMessageServer (file:///darkreader/tests/browser/environment.js:336:16)\n#18 19.91     at CustomJestEnvironment.setup (file:///darkreader/tests/browser/environment.js:28:18)\n#18 19.91     at runTestInternal (/darkreader/node_modules/jest-runner/build/index.js:266:5)\n#18 19.91     at runTest (/darkreader/node_modules/jest-runner/build/index.js:340:7)\n#18 19.91 Emitted 'error' event on WebSocketServer instance at:\n#18 19.91     at Server.emit (node:events:524:28)\n#18 19.91     at emitErrorNT (node:net:1944:8)\n#18 19.91     at processTicksAndRejections (node:internal/process/task_queues:82:21) {\n#18 19.91   code: 'EADDRINUSE',\n#18 19.91   errno: -98,\n#18 19.91   syscall: 'listen',\n#18 19.91   address: '::',\n#18 19.91   port: 8894\n#18 19.91 }\n#18 19.91 \n#18 19.91 Node.js v20.19.4\n#18 ERROR: process \"/bin/sh -c TEST_WORKERS=96 npm run test:browser\" did not complete successfully: exit code: 1\n------\n > [15/21] RUN TEST_WORKERS=96 npm run test:browser:\n19.91     at emitErrorNT (node:net:1944:8)\n19.91     at processTicksAndRejections (node:internal/process/task_queues:82:21) {\n19.91   code: 'EADDRINUSE',\n19.91   errno: -98,\n19.91   syscall: 'listen',\n19.91   address: '::',\n19.91   port: 8894\n19.91 }\n19.91 \n19.91 Node.js v20.19.4\n------\nenvgym.dockerfile:46\n--------------------\n  44 |         mkdir -p /root/.mozilla/firefox/default-release && \\\n  45 |         echo -e 'user_pref(\"extensions.webextensions.restrictedDomains\", \"\");\\nuser_pref(\"privacy.resistFingerprinting.block_mozAddonManager\", true);' >> /root/.mozilla/firefox/default-release/prefs.js\n  46 | >>> RUN TEST_WORKERS=96 npm run test:browser\n  47 |     RUN npm run test:inject\n  48 |     RUN NODE_OPTIONS=\"--max-old-space-size=8192\" npm run build && ls build/release/darkreader-*.zip\n--------------------\nERROR: failed to solve: process \"/bin/sh -c TEST_WORKERS=96 npm run test:browser\" did not complete successfully: exit code: 1\n"
  },
  "run": {
    "success": false,
    "stdout": "",
    "stderr": ""
  }
}