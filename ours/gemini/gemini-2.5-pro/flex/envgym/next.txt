current progress
A comprehensive environment setup plan has been created. An attempt to automate this plan via a Dockerfile has been made. The Docker build process successfully installed system-level dependencies and Miniconda. However, the build failed at the step responsible for creating the main conda environment (`flex-env`), preventing the installation of R/Python packages and the execution of subsequent setup scripts.

next step
Modify the Dockerfile to resolve the `conda create` command failure. The error likely stems from the `RUN` command using the default `/bin/sh` shell, which is not fully compatible with conda's activation scripts. The fix is to explicitly switch the shell to `bash` for all subsequent conda operations by adding the instruction `SHELL ["/bin/bash", "-c"]` immediately after the Miniconda installation block.